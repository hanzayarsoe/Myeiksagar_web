<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Contact Us</title>
    <link
      rel="shortcut icon"
      href="../static/images/favicon.ico"
      type="image/x-icon"
    />
    <script src="https://cdn.tailwindcss.com"></script>
    <script
      src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"
      defer
    ></script>
    <style>
      body {
        font-family: Arial, sans-serif;
        background-color: #c2c8cf;
        margin: 0;
        padding: 0;
        height: 100vh;
      }

      .contact-container {
        background-color: #fff;
        padding: 40px;
        border-radius: 10px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        max-width: 500px;
        margin: 0 auto;
        margin-top: 20px;
        width: 100%;
      }

      .contact-content h2 {
        margin-bottom: 20px;
        color: #555;
      }

      .contact-content p {
        margin-bottom: 20px;
        color: #777;
        line-height: 1.6;
      }

      form input,
      form textarea {
        width: 100%;
        padding: 10px;
        margin-bottom: 20px;
        border: 1px solid #ccc;
        border-radius: 5px;
      }

      form button {
        background-color: #d35b45;
        color: white;
        padding: 10px 20px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        width: 100%;
      }

      form button:hover {
        background-color: #bf4f39;
      }

      .recaptcha-text {
        font-size: 12px;
        color: #999;
        margin-top: 20px;
      }

      .recaptcha-text a {
        color: #999;
        text-decoration: underline;
      }

      /* Loading Spinner */
      .spinner {
        display: none;
        width: 40px;
        height: 40px;
        border: 4px solid #f3f3f3;
        border-top: 4px solid #3498db;
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin: 20px auto;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      /* Toast Message */
      .toast {
        visibility: hidden;
        min-width: 250px;
        margin-left: -125px;
        background-color: #333;
        color: #fff;
        text-align: center;
        border-radius: 2px;
        padding: 16px;
        position: fixed;
        z-index: 1;
        left: 50%;
        bottom: 30px;
      }

      .toast.show {
        visibility: visible;
        animation: fadein 0.5s, fadeout 0.5s 2.5s;
      }

      @keyframes fadein {
        from {
          bottom: 0;
          opacity: 0;
        }
        to {
          bottom: 30px;
          opacity: 1;
        }
      }

      @keyframes fadeout {
        from {
          bottom: 30px;
          opacity: 1;
        }
        to {
          bottom: 0;
          opacity: 0;
        }
      }
    </style>
  </head>
  <body>
    <header
      x-data="{ isOpen: false }"
      class="bg-gradient-to-r from-blue-600 to-purple-600 shadow-md"
    >
      <nav
        class="container mx-auto px-4 py-2 flex items-center justify-between"
      >
        <!-- Logo -->
        <div class="flex items-center">
          <img
            src="../static/images/school_logo.png"
            alt="Logo"
            class="rounded-full"
            style="width: 60px; height: 60px"
          />
        </div>

        <!-- Nav Links (Desktop) -->
        <div class="hidden md:flex items-center space-x-4">
          <a
            href="{{ url_for('index') }}"
            class="text-white py-2 px-4 hover:bg-blue-500 rounded-md transition duration-300"
            >Home</a
          >
          <a
            href="{{url_for('quiz_start_page')}}"
            class="text-white py-2 px-4 hover:bg-blue-500 rounded-md transition duration-300"
            >Fun Game</a
          >
          <a
            href="https://myeiksagar-collect.vercel.app/"
            target="_blank"
            class="text-white py-2 px-4 hover:bg-blue-500 rounded-md transition duration-300"
            >Insert Data</a
          >
          <a
            href="{{url_for('about')}}"
            class="text-white py-2 px-4 hover:bg-blue-500 rounded-md transition duration-300"
            >About Us</a
          >
          <a
            href="{{url_for('contact')}}"
            class="bg-white text-blue-600 py-2 px-4 hover:bg-gray-100 rounded-md transition duration-300"
            >Contact us</a
          >
        </div>

        <!-- Mobile Nav Button -->
        <div class="md:hidden">
          <button
            @click="isOpen = !isOpen"
            type="button"
            class="text-white hover:text-gray-200 focus:outline-none focus:text-gray-200"
            aria-label="toggle menu"
          >
            <svg viewBox="0 0 24 24" class="h-6 w-6 fill-current">
              <path
                fill-rule="evenodd"
                d="M4 5h16a1 1 0 0 1 0 2H4a1 1 0 1 1 0-2zm0 6h16a1 1 0 0 1 0 2H4a1 1 0 1 1 0-2zm0 6h16a1 1 0 0 1 0 2H4a1 1 0 1 1 0-2z"
              ></path>
            </svg>
          </button>
        </div>
      </nav>

      <!-- Mobile Menu -->
      <div
        x-show="isOpen"
        x-transition:enter="transition ease-out duration-200"
        x-transition:enter-start="opacity-0 transform scale-90"
        x-transition:enter-end="opacity-100 transform scale-100"
        x-transition:leave="transition ease-in duration-200"
        x-transition:leave-start="opacity-100 transform scale-100"
        x-transition:leave-end="opacity-0 transform scale-90"
        class="md:hidden bg-blue-500 shadow-lg z-10 px-4 py-4 space-y-2"
      >
        <a
          href="{{ url_for('index') }}"
          class="block px-3 py-2 rounded-md text-base font-medium text-white hover:bg-blue-600 transition duration-300"
          >Home</a
        >
        <a
          href="{{url_for('quiz_start_page')}}"
          class="block px-3 py-2 rounded-md text-base font-medium text-white hover:bg-blue-600 transition duration-300"
          >Fun Game</a
        >
        <a
          href="https://myeiksagar-collect.vercel.app/"
          target="_blank"
          class="block px-3 py-2 rounded-md text-base font-medium text-white hover:bg-blue-600 transition duration-300"
          >Insert Data</a
        >
        <a
          href="{{url_for('about')}}"
          class="block px-3 py-2 rounded-md text-base font-medium text-white hover:bg-blue-600 transition duration-300"
          >About Us</a
        >
        <a
          href="{{url_for('contact')}}"
          class="block px-3 py-2 rounded-md text-base font-medium text-white hover:bg-blue-600 transition duration-300"
          >Contact us</a
        >
      </div>
    </header>

    <div class="contact-container">
      <div class="contact-content">
        <h2>We are here to help!</h2>
        <p>
          Let us know how we can best serve you. Use the contact form to email
          us or select from the topics below that best fit your needs. It's an
          honor to support you in your journey towards better.
        </p>
        <form id="feedbackForm">
          <input type="text" name="name" placeholder="Name" required />
          <input type="email" name="email" placeholder="Email" required />
          <input type="tel" name="phone" placeholder="Phone number" />
          <textarea
            name="comment"
            placeholder="Comment"
            rows="4"
            required
          ></textarea>
          <button type="submit">Send Message</button>
        </form>
        <div id="spinner" class="spinner"></div>
        <p id="submissionStatus"></p>
        <p class="recaptcha-text">
          This site is protected by reCAPTCHA and the Google
          <a href="#">Privacy Policy</a> and
          <a href="#">Terms of Service</a> apply.
        </p>
      </div>
    </div>

    <div id="toast" class="toast">Message sent successfully!</div>

    <script>
      document
        .getElementById("feedbackForm")
        .addEventListener("submit", function (e) {
          e.preventDefault();

          var form = e.target;
          var formData = new FormData(form);
          var statusElement = document.getElementById("submissionStatus");
          var spinnerElement = document.getElementById("spinner");
          var toastElement = document.getElementById("toast");

          // Show spinner
          spinnerElement.style.display = "block";
          statusElement.textContent = "";

          fetch(
            "https://script.google.com/macros/s/AKfycbwbKZx17THx81AKeAUcHlKr9loOTz9hOiD6rBi3N9bCz92mIR83kw2D4--gCDThuQGY/exec",
            {
              method: "POST",
              body: formData,
            }
          )
            .then((response) => response.text())
            .then((result) => {
              // Hide spinner
              spinnerElement.style.display = "none";

              // Show success message
              toastElement.className = "toast show";
              setTimeout(function () {
                toastElement.className = toastElement.className.replace(
                  "show",
                  ""
                );
              }, 3000);

              form.reset();
            })
            .catch((error) => {
              // Hide spinner
              spinnerElement.style.display = "none";

              statusElement.textContent =
                "An error occurred. Please try again.";
              console.error("Error:", error);
            });
        });
    </script>
  </body>
</html>
